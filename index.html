<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mapa de Calor Mundial</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: white;
      color: #333;
    }
    #mapa {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>
  <div id="mapa"></div>

  <script>
    // Leer el JSON generado en Python
    fetch('datos/datos.json')
      .then(response => response.json())
      .then(data => {
        const locations = data.map(d => d.iso_alpha);   // ISO-3
        const z = data.map(d => d["All_adults_Obesity (%)"]);  // valores numéricos
        const text = data.map(d => d.Country);          // nombre de país

        const trace = {
          type: 'choropleth',
          locationmode: 'ISO-3',
          locations: locations,
          z: z,
          text: text,
          colorscale: 'Turbid',
          colorbar: { title: 'All adults Obesity (%) (BMI ≥ 30kg/m²)' }
        };

        const layout = {
          title: 'Mapa de Calor Mundial',
          geo: { projection: { type: 'natural earth' } }
        };

        Plotly.newPlot('mapa', [trace], layout);

        // Evento de clic
        const mapaDiv = document.getElementById('mapa');
        mapaDiv.on('plotly_click', function(eventData) {
          const punto = eventData.points[0];
          alert(`Hiciste click en ${punto.text} con valor ${punto.z}`);
        });
      });
  </script>
</body>
</html>

